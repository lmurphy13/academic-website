<!DOCTYPE html>
<html>
	<head>	
		<title>Daily Log</title>
		<link rel="stylesheet" type="text/css" href="style.css" />
	</head>

	<body>
	<h1 class="title-block">Daily Research Log</h1>

	<table class="content" style="width: 60%; margin-left: auto; margin-right: auto;" border="1px solid black">
		<tr>
			<td>
				<p>
					Saturday October 23, 2021: It has become apparent that there are several issues with ARM stack frame generation. The previous MIPS backend is unable to adequately be converted to return from ARM functions as of
					right now. I will need to discuss with Dr. Brylow more about:
					<ul>
						<li>Creating and destroying stack frames</li>
						<li>Returning from a function</li>
						<li>Returning from a callee function to a caller function</li>
						<li>Whether we need to start using push and pop calls</li>
					</ul>

					I disassembled some object code generated by the Xinu ARM cross-compiler and saw that it uses push and pop calls. Maybe it would be easier to go that route rather than manually manipulating the stack pointer. 
					This may become a large roadblock. The MIPS code generator is using a jump table to move around function calls. Maybe we can reuse that in ARM.
				</p>
			</td>
		</tr>
		
		
		<tr>
			<td>
				<p>
					Wednesday October 20, 2021: Met with Dr. Brylow today. Showed him my progress on the code and my thesis. He gave me the <code>minijava.c</code> file that implements some of the system calls used by the MiniJava compiler. He also showed me how to compile the output of the MiniJava compiler into Xinu. 
				</p>

				<p>
					There were initially some issues with getting the code to compile, but we can now compile very basic programs. Concurrency features are not yet supported. A bug was discovered with the register allocator. Certain registers were being used that were being overridden by procedure calls. This was resolved. An outstanding issue remains when trying to return from a function call nested within another function call. 
				</p>

				<p>
					<strong>TO DO:</strong> Keep working on writing. Get all basic functionality working before implementing other "nice-to-have" features, like concurrency. Contact Praveen regarding graduation.
				</p>
			</td>
		</tr>
		
		<tr>
			<td>
				<p>
					Sunday October 17, 2021: <code>Arm/Codegen.java</code> is complete, but generates semantically incorrect ARM. One large issue of note is that any generated macros contain a <code>.</code> and are causing issues when assembling. I am trying to track down where a period is getting added to the frame's name, but I am not having much luck as of yet. Once that is solved, there are two more large problems that need to get fixed:
					<ol>
						<li>Function prologue/epilogue</li>
						<li><code>str</code> syntax
					</ol>
				</p>

				<p>
					Currently, the ARM code generator inherits MIPS-style stack frame allocation, which involves a set of moves and stores to get caller-save registers figured out. This will need to get changed so that ARM push/pop opcodes are called instead. Also, instead of executing a <code>bx lr</code> statement at the end of a function, the ARM code generator uses the MIPS method of subtracting from the stack pointer to move into the scope of the caller function. I am unsure if this works in ARM. I may need to find a way to keep track of the caller and branch to it at the end of the callee.
				</p>

				<p>
					The <code>str</code> instruction is currently being generated with its parameters out of order. This should be a simple fix. 
				</p>

				<p>
					<strong>UPDATE:</strong> Technically everything assembles but is missing the Xinu calls. Need to ask Dr. Brylow how to hook in the .S into Xinu
				</p>
			</td>
		</tr>
		
		<tr>
			<td>
				<p>
					Saturday October 16, 2021: Nearly done with <code>Arm/Codegen.java</code> and will begin preliminary testing ASAP. Also, started thinking about organization for Chapters 2 and 3, Background and Related Work chapters. 
				</p>
			</td>
		</tr>
		
		<tr>
			<td>
				<p>
					Friday October 15, 2021: Continued work on <code>Arm/Codegen.java</code>. Had some realizations about the ARM architecture vs. MIPS, so I needed to refactor a bit of the code. Some legacy things like <code>Frame.					ZERO</code> were retained in order to make code emission easier. In the <code>Arm</code> package, <code>Frame.ZERO</code> has been itialized as <code>#0</code>, since MIPS uses a zero register to hold the same value. The easiest solution, to me, was to just set that "register" to the immediate zero value.
				</p>
			</td>
		</tr>
		
		<tr>
			<td>
				<p>
					Wednesday October 13, 2021: Had weekly meeting with Dr. Brylow. Had a good discussion and several questions answered. Contacted Alex G. to get a copy of the Research Xinu source.
				</p>
				<p>
					<strong>Code Progress:</strong>
					<br>
					Finished initial modifications of <code>Arm/ArmFrame.java, Arm/InReg.java, Arm/InFrame.java</code>. Started working on <code>Arm/Codegen.java</code>. Worked on converting store convention from Mips to Arm.
				</p>
				<p>
					<strong>Writing Progress:</strong>
					<br>
					More messing around with formatting. Got the go-ahead from Dr. Brylow to start writing some sections. Will start on Background chapter this week. 
					It is still unclear what the overall goal is of the thesis, but that's okay for now.
				</p>
			</td>
		</tr>
		
		<tr>
			<td>
				<p>
					Saturday October 9, 2021: Bookmarked important sections of <i>Dragon Book</i> Chapter 8 and Appel Chapter 8. Started considering how to create Arm Basic Blocks. Wrote a cheatsheet on Arm 32 bit registers. 
				</p>
			</td>
		</tr>

		<tr>
			<td>
				<p>
					Friday October 8, 2021: Read the first half of <i>Dragon Book</i> Chapter 8. Looked more at existing compiler codebase. Began thinking about thesis chapters.
				</p>
			</td>
		</tr>
			
		<tr>
			<td>
				<p>
					Thursday October 7, 2021: Dr. Brylow gave me access to the ConcurrentMiniJava compiler GitHub repository. I have forked that repository into my own GitHub account. After doing so, I cloned the repo to my Morbius
					home directory. I began laying out the <code>Arm</code> package. I have also written a bash script to build the compiler for me. I will need to brush up on my ARM assembly.
					<br><br>
					<strong>TODO: </strong>Ask Dr. Brylow for the latest stable version of multicore Embedded Xinu.
				</p>
			</td>
		</tr>
		
		<tr>
			<td>
				<p>
					Tuesday October 5, 2021: <i>Compilers: Principles, Techniques, & Tools</i> arrived in the mail. Began skimming the first few chapters.
					Added to <a href="sources.html">list of sources</a>.
				</p>
			</td>
		</tr>
		
		<tr>
			<td>
				<p>
					Friday October 1, 2021: Read Mallen & Brylow compiler paper. Added to <a href="sources.html">list of sources</a>.
				</p>
			</td>
		</tr>
		
		<tr>
			<td>	
				<p>
					Wednesday September 29, 2021: Met with Dr. Brylow to go over expectations and to discuss a topic.
					A topic was selected: work on porting the MiniJava compiler to ARM and bring in cryptography and concurrency libraries.
					<br><br>
					<strong>TODO: </strong>Read Mallen & Brylow Compiler paper, submit thesis paperwork. 
				</p>
			</td>
		</tr>
	</table>

	<p>
		Entries are ordered from most recent to least recent.

	</p>

	</body>

	<footer style="text-align: center">
		<hr style="width: 75%">
		Go <a href="index.html">back</a>.
	</footer>
</html>
